<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>


    <script src="scripts/bootstrap.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <link href="css/menustyles.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/script.js" type="text/javascript"></script>

    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <div id='cssmenu'>
        <ul>
            <li><a href='home.html'><span>Home</span></a></li>
            <li class='has-sub'>
                <a href='CreateAdd.html'><span>Admin</span></a>
                <ul>
                    <li><a href='CreateAdd.html'><span>Create a Tracker</span></a> </li>
                    <li><a href='ActiveAdds.html'><span>Active Trackers</span></a> </li>
                </ul>
            </li>
            <li><a href='Products.html'><span>Products</span></a></li>
            <li><a href='Reporting.html'><span>Dashboard</span></a></li>
            <li><a href='Results.html'><span>A/B Testing Results</span></a></li>
        </ul>
    </div>
    <div class="panel panel-default">
        <div>
            <img src="images/Verizons_new_logo.jpg" width="200px" />
            <div style="float:right;color:cadetblue;  padding-right:100px"><h1 style="font-weight:bold;">VERSUS</h1></div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            Admin > Create a Tracker
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">  Create new Advertisement</div>
        <div class="panel-body">
            <div class="row form-group">
                <div class="col-lg-3 col-md-4 col-sm-1">
                    <label for="txtAge"> Age: </label>
                    <select id="ddlAge" class="form-control">
                        <option></option>
                        <option value="LT5"> Below 5 Years</option>
                        <option value="5T13">5 to 13 Years</option>
                        <option value="14T17">14 To 17 Years</option>
                        <option value="18T24">18 To 24 Years</option>
                        <option value="25T44">25 To 44 Years</option>
                        <option value="45T64">45 To 64 Years</option>
                        <option value="64UT">65 Years and Over</option>
                    </select>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-1">
                    <label for="txtGender"> Gender: </label>
                    <select type="text" id="txtGender" class="form-control">
                        <option value='M'>MALE</option>
                        <option value='F'>FEMALE</option>
                        <option value='O'>OTHER</option>
                    </select>
                </div>
                <div class="col-lg-6 col-md-4 col-sm-1">

                </div>
            </div>
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-1">
                    <label for="txtDevice"> Device: </label>
                    <input type="text" id="txtDevice" class="form-control" />
                </div>
                <div class="col-lg-3 col-md-6 col-sm-1">

                    <label for="txtBrowser"> Browser: </label>
                    <input type="text" id="txtBrowser" class="form-control" />
                </div>
                <div class="col-lg-6 col-md-0 col-sm-1">

                </div>
            </div>

            <div class="row">
                <div class="col-lg-3 col-md-2 col-sm-1">
                    <label for="txtRegion"> Region: </label>

                    <select id="txtRegion" class="form-control">
                        <option value='AL'>Alabama </option>
                        <option value='AK'>Alaska </option>
                        <option value='AZ'>Arizona </option>
                        <option value='AR'>Arkansas </option>
                        <option value='CA'>California </option>
                        <option value='CO'>Colorado </option>
                        <option value='CT'>Connecticut </option>
                        <option value='DE'>Delaware </option>
                        <option value='DC'>District of Columbia </option>
                        <option value='FL'>Florvaluea </option>
                        <option value='GA'>Georgia </option>
                        <option value='HI'>Hawaii </option>
                        <option value='value'>valueaho </option>
                        <option value='IL'>Illinois </option>
                        <option value='IN'>Indiana </option>
                        <option value='IA'>Iowa </option>
                        <option value='KS'>Kansas </option>
                        <option value='KY'>Kentucky </option>
                        <option value='LA'>Louisiana </option>
                        <option value='ME'>Maine </option>
                        <option value='MD'>Maryland </option>
                        <option value='MA'>Massachusetts </option>
                        <option value='MI'>Michigan </option>
                        <option value='MN'>Minnesota </option>
                        <option value='MS'>Mississippi </option>
                        <option value='MO'>Missouri </option>
                        <option value='MT'>Montana </option>
                        <option value='NE'>Nebraska </option>
                        <option value='NV'>Nevada </option>
                        <option value='NH'>New Hampshire </option>
                        <option value='NJ'>New Jersey </option>
                        <option value='NM'>New Mexico </option>
                        <option value='NY'>New York </option>
                        <option value='NC'>North Carolina </option>
                        <option value='ND'>North Dakota </option>
                        <option value='OH'>Ohio </option>
                        <option value='OK'>Oklahoma </option>
                        <option value='OR'>Oregon </option>
                        <option value='PA'>Pennsylvania </option>
                        <option value='RI'>Rhode Island </option>
                        <option value='SC'>South Carolina </option>
                        <option value='SD'>South Dakota </option>
                        <option value='TN'>Tennessee </option>
                        <option value='TX'>Texas </option>
                        <option value='UT'>Utah </option>
                        <option value='VT'>Vermont </option>
                        <option value='VA'>Virginia </option>
                        <option value='WA'>Washington </option>
                        <option value='WV'>West Virginia </option>
                        <option value='WI'>Wisconsin </option>
                        <option value='WY'>Wyoming </option>
                        <option value='AS'>America Samoa </option>
                        <option value='FM'>Federated States of Micronesia </option>
                        <option value='GU'>Guam </option>
                        <option value='MH'>Marshall Islands </option>
                        <option value='MP'>Northern Mariana Islands </option>
                        <option value='PW'>Palau </option>
                        <option value='PR'>Puerto Rico </option>
                        <option value='UM'>U.S. Minor Outlying Islands </option>
                        <option value='VI'>Virgin Islands of the United States </option>

                    </select>
                </div>
                <div class="col-lg-3 col-md-2 col-sm-1">
                    <label for="txtProductURL"> URL: </label>
                    <input type="text" id="txtProductURL" class="form-control" />
                </div>

                <div>
                    <span id="dvError" class="text-danger"></span>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-3 col-md-2 col-sm-1">
                    <label for="txtAddDesc"> Model Description: </label>
                    <input type="text" id="txtAddDesc" class="form-control" />
                </div>
                <div class="col-lg-3 col-md-2 col-sm-1">
                    <label for="txtAddDesc"> Promo Channel: </label>
                    <select type="text" id="ddlPromo" class="form-control">
                        <option value='FB'>FACEBOOK</option>
                        <option value='TW'>TWITTER</option>
                        <option value='YT'>YOUTUBE</option>
                    </select>
                </div>
                <div class="col-lg-6 col-md-7 col-sm-1">

                </div>
            </div>
            <div class="row">

                <div class="col-lg-3 col-md-3 col-sm-1">
                    <button id="btnSave" class="btn btn-primary btn-block" style="margin-top:20px">Save</button>
                </div>
                <div class="col-lg-6 col-md-7 col-sm-1">

                </div>
            </div>
        </div>
    </div>
    <div class="panel  panel-primary">
        <div class="panel-heading">Advertisement Details</div>
        <div class="panel-body">
            <div class="table-responsive img-rounded">
                <table id="tblAddItems" class="table table-striped table-bordered">
                    <thead>
                        <tr class="bg-info">
                            <th>ID</th>
                            <th>Description</th>
                            <th>Age </th>
                            <th>Promo Channel</th>
                            <th>Gender</th>
                            <th>Region</th>
                            <th>Browser</th>
                            <th>Device</th>

                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    function SaveData() {
        //alert("Age!!");
        var AgeGroup = $("#ddlAge").val().trim();
        var AgeGroupRange = $("#ddlAge option:selected").text().trim();
        var Gender = $("#txtGender").val().trim();
        var Region = $("#txtRegion").val().trim();
        var regionName=$("#txtRegion option:selected").text().trim();
        var Device = $("#txtDevice").val().trim();
        var Browser = $("#txtBrowser").val().trim();
        var AddDesc = $("#txtAddDesc").val().trim();
        var Promo = $("#ddlPromo").val().trim();
         var PromoName = $("#ddlPromo option:selected").val().trim();
         var URL = $("#txtProductURL").val() + "&AgeGroup=" + AgeGroup + "&Gender=" + Gender + "&Region=" + Region + "&Device=" + Device + "&Browser=" + Browser + "&Promo=" + Promo;
        if (AgeGroup.length > 0 && Gender.length > 0 && Region.length > 0 && Device.length > 0 && Browser.length > 0 && URL.length>0) {
            $("#dvError").html("");
            var data = {
                AgeGroup: AgeGroup,
                AgeGroupRange: AgeGroupRange,
                Gender: Gender,
                Region: Region,
                Device: Device,
                Browser: Browser,
                Promo: Promo,
                PromoName: PromoName,
                RegionName: regionName,
                URL: URL,
                AddDesc: AddDesc
            }

            //alert("Age!!" + data);
            $.ajax({
                type: 'POST',
                url: '../../api/Values/PostURL',
                data: data,
                async: true,
                cache: false,
                success: function (xml) {
                    SaveSuccess(xml);

                }, error: function () {
                    $("#dvError").html("Service Error!!!Cannot procceed with save.");
                }


            });
        }
        else {
            $("#dvError").html("Please enter all the required fields.");
        }
    }
    function SaveSuccess(msg) {
        if (msg == "OK") {
            OnLoad();
        }
        else {
            $("#dvError").html("Data cannot be saved successfully.");
        }
    }
    function OnLoad() {
        $.ajax({
            type: 'GET',
            url: '../../api/Values/getUrlNames',
            async: true,
            cache: false,
            success: function (xml) {

                LoadData(xml);
            }, error: function () {
                alert("error");
            }
        });
    }
    function LoadData(msg) {
        if (msg != undefined || msg != '') {
            $("#tblAddItems").find("tbody").empty();
            $.each(msg, function (i, obj) {
                var sURL = msg[i].URL;
                var sID = msg[i].ID;
                var sAddDesc = msg[i].AddDesc;
                var sAgeGroupRange = msg[i].AgeGroupRange;
                var sGender = msg[i].Gender;
                var sRegion = msg[i].RegionName;
                var sBrowser = msg[i].Browser;
                var sDevice = msg[i].Device;
                var sPromo = msg[i].PromoName;
                var extraClass = i % 2 == 0 ? "active" : "warning";
                $("#tblAddItems").append(
                    "<tr class=" + extraClass + ">" +
                     " <td>" + sID + "</td>" +
                   " <td><a href='Products.html'>" + sURL + "</a></td>" +
                    " <td>" + sAgeGroupRange + "</td>" +
                    " <td>" + sPromo + "</td>" +
                     " <td>" + sGender + "</td>" +
                      " <td>" + sRegion + "</td>" +
                       " <td>" + sBrowser + "</td>" +
                        " <td>" + sDevice + "</td>" +
                    "</tr>"
                    );
            });
        }
    }
    $("#btnSave").click(function (event) {
      //  debugger;
        SaveData();

        event.preventDefault();

        // location.reload();


    });
    $(document).ready(function () {
        OnLoad();

    });

</script>
